<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Oops Merch</title>
  <!-- 1. Подключаем Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- 2. Подключаем React и ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  
  <!-- 3. Подключаем Babel для компиляции JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <style>
    /* Убираем скроллбар для фильтров, как в твоем коде */
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    
    /* Базовый шрифт, как в твоем коде */
    body {
      font-family: sans-serif;
    }
  </style>
</head>
<body>

  <!-- 4. Корневой элемент, куда будет встроен React -->
  <div id="root"></div>

  <!-- 5. Весь твой React-код, обернутый в 'text/babel' -->
  <script type="text/babel">

    // Достаем useState и useEffect из React
    const { useState, useEffect } = React;

    // --- ВСТРАИВАЕМ ИКОНКИ (замена 'lucide-react') ---
    const ShoppingBag = ({ size = 24, strokeWidth = 2, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" {...props}>
        <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/>
        <line x1="3" y1="6" x2="21" y2="6"/>
        <path d="M16 10a4 4 0 0 1-8 0"/>
      </svg>
    );
    const User = ({ size = 24, strokeWidth = 2, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" {...props}>
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
        <circle cx="12" cy="7" r="4"/>
      </svg>
    );
    const Search = ({ size = 24, strokeWidth = 2, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" {...props}>
        <circle cx="11" cy="11" r="8"/>
        <line x1="21" y1="21" x2="16.65" y2="16.65"/>
      </svg>
    );
    const Menu = ({ size = 24, strokeWidth = 2, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" {...props}>
        <line x1="3" y1="12" x2="21" y2="12"/>
        <line x1="3" y1="6" x2="21" y2="6"/>
        <line x1="3" y1="18" x2="21" y2="18"/>
      </svg>
    );
    const X = ({ size = 24, strokeWidth = 2, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" {...props}>
        <line x1="18" y1="6" x2="6" y2="18"/>
        <line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    );
    const ArrowLeft = ({ size = 24, strokeWidth = 2, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" {...props}>
        <line x1="19" y1="12" x2="5" y2="12"/>
        <polyline points="12 19 5 12 12 5"/>
      </svg>
    );
    const Check = ({ size = 24, strokeWidth = 2, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" {...props}>
        <polyline points="20 6 9 17 4 12"/>
      </svg>
    );
    const AlertCircle = ({ size = 24, strokeWidth = 2, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" {...props}>
        <circle cx="12" cy="12" r="10"/>
        <line x1="12" y1="8" x2="12" y2="12"/>
        <line x1="12" y1="16" x2="12.01" y2="16"/>
      </svg>
    );
    const Send = ({ size = 24, strokeWidth = 2, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" {...props}>
        <line x1="22" y1="2" x2="11" y2="13"/>
        <polygon points="22 2 15 22 11 13 2 9 22 2"/>
      </svg>
    );

    // --- MOCK DATA (с замененными картинками) ---
    const CATEGORIES = ['Все', 'Футболки', 'Худи', 'Свитшоты', 'Лонгсливы', 'Зипхуди'];

    const PRODUCTS = [
      {
        id: 1,
        title: 'Oversize Hoodie "Chaos"',
        category: 'Худи',
        price: 4500,
        images: ['https://images.unsplash.com/photo-1556905055-8f358a7a47b2?auto=format&fit=crop&q=80&w=400&h=500'],
        isLimited: true,
        stock: 5,
        attributes: {
          color: 'Black',
          density: '450 г/м²',
          composition: '100% хлопок (футер 3-нитка)',
          model_info: 'Рост модели 185см, размер XL'
        },
        sizes: ['S', 'M', 'L', 'XL', 'XXL']
      },
      {
        id: 2,
        title: 'Basic Tee "Void"',
        category: 'Футболки',
        price: 2200,
        images: ['https://images.unsplash.com/photo-1583743814966-8936f5b7be1a?auto=format&fit=crop&q=80&w=400&h=500'],
        isLimited: false,
        attributes: {
          color: 'White',
          density: '240 г/м²',
          composition: '100% хлопок',
          model_info: 'Рост модели 170см, размер M'
        },
        sizes: ['XS', 'S', 'M', 'L', 'XL']
      },
      {
        id: 3,
        title: 'Zip-Hoodie "Archive"',
        category: 'Зипхуди',
        price: 5200,
        images: ['https://images.unsplash.com/photo-1620799140408-ed5341cd2431?auto=format&fit=crop&q=80&w=400&h=500'],
        isLimited: true,
        stock: 2,
        attributes: {
          color: 'Washed Grey',
          density: '480 г/м²',
          composition: 'Cotton/Polyester mix',
          model_info: 'Рост модели 180см, размер L'
        },
        sizes: ['M', 'L', 'XL']
      },
      {
        id: 4,
        title: 'Longsleeve "Glitch"',
        category: 'Лонгсливы',
        price: 3200,
        images: ['https://images.unsplash.com/photo-1618354691373-d851c5c3a990?auto=format&fit=crop&q=80&w=400&h=500'],
        isLimited: false,
        attributes: {
          color: 'Black',
          density: '280 г/м²',
          composition: '100% хлопок',
          model_info: 'Рост модели 182см, размер L'
        },
        sizes: ['S', 'M', 'L', 'XL']
      }
    ];

    // --- COMPONENTS ---

    const Button = ({ children, onClick, variant = 'primary', className = '', disabled = false, fullWidth = false }) => {
      const baseStyle = "py-3 px-6 rounded-none font-bold text-sm uppercase tracking-wider transition-all duration-200 active:scale-95 flex items-center justify-center gap-2";
      const variants = {
        primary: "bg-black text-white hover:bg-zinc-800 disabled:bg-zinc-600",
        secondary: "border-2 border-black text-black hover:bg-black hover:text-white",
        outline: "border border-zinc-300 text-zinc-600 hover:border-black hover:text-black",
        accent: "bg-red-600 text-white hover:bg-red-700"
      };
      
      return (
        <button 
          onClick={onClick} 
          disabled={disabled}
          className={`${baseStyle} ${variants[variant]} ${fullWidth ? 'w-full' : ''} ${className}`}
        >
          {children}
        </button>
      );
    };

    const Badge = ({ children, type = 'default' }) => {
      const styles = {
        default: "bg-zinc-100 text-zinc-800",
        limited: "bg-red-600 text-white animate-pulse",
        new: "bg-blue-600 text-white"
      };
      return (
        <span className={`px-2 py-1 text-[10px] font-bold uppercase tracking-wide rounded-sm ${styles[type]}`}>
          {children}
        </span>
      );
    };

    // --- PAGES ---

    const ProductCard = ({ product, onClick }) => (
      <div className="group cursor-pointer flex flex-col gap-2" onClick={() => onClick(product)}>
        <div className="relative aspect-[3/4] bg-zinc-200 overflow-hidden">
          {/* Watermark Simulation */}
          <div className="absolute inset-0 pointer-events-none opacity-10 flex items-center justify-center rotate-45">
            <span className="text-4xl font-black uppercase">Oops Merch</span>
          </div>
          
          <img 
            src={product.images[0]} 
            alt={product.title} 
            className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105" 
          />
          
          {product.isLimited && (
            <div className="absolute top-2 left-2">
              <Badge type="limited">Limited: Осталось {product.stock}</Badge>
            </div>
          )}
          
          <div className="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4 translate-y-full group-hover:translate-y-0 transition-transform duration-300">
            <p className="text-white text-xs font-bold">БЫСТРЫЙ ПРОСМОТР</p>
          </div>
        </div>
        
        <div className="flex justify-between items-start">
          <div>
            <h3 className="text-sm font-bold uppercase text-zinc-900 group-hover:text-zinc-600 transition-colors">{product.title}</h3>
            <p className="text-xs text-zinc-500">{product.category}</p>
          </div>
          <span className="text-sm font-bold">{product.price} ₽</span>
        </div>
      </div>
    );

    const ProductDetail = ({ product, onBack, onAddToCart }) => {
      const [selectedSize, setSelectedSize] = useState(null);
      const [activeTab, setActiveTab] = useState('desc');

      if (!product) return null;

      return (
        <div className="min-h-screen bg-white pb-20">
          <div className="sticky top-0 z-30 bg-white/80 backdrop-blur-md border-b border-zinc-100 px-4 py-3 flex items-center gap-4">
            <button onClick={onBack} className="p-2 hover:bg-zinc-100 rounded-full">
              <ArrowLeft size={20} />
            </button>
            <span className="font-bold text-sm uppercase truncate">{product.title}</span>
          </div>

          <div className="max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8 p-4 md:p-8">
            {/* Image Gallery */}
            <div className="space-y-4">
              <div className="aspect-[3/4] bg-zinc-100 relative overflow-hidden rounded-sm">
                 {/* Watermark */}
                <div className="absolute bottom-4 right-4 opacity-20 pointer-events-none">
                   <span className="text-xl font-black uppercase tracking-tighter">Oops<br/>Merch</span>
                </div>
                <img src={product.images[0]} alt={product.title} className="w-full h-full object-cover" />
                 {product.isLimited && (
                    <div className="absolute top-4 left-4">
                        <Badge type="limited">Low Stock: {product.stock}</Badge>
                    </div>
                )}
              </div>
              <div className="grid grid-cols-4 gap-2">
                {[1,2,3].map((_, i) => (
                   <div key={i} className="aspect-square bg-zinc-100 cursor-pointer hover:opacity-80">
                       {/* Можно добавить доп. картинки, если они есть */}
                   </div>
                ))}
              </div>
            </div>

            {/* Info */}
            <div className="flex flex-col gap-6">
              <div>
                <div className="flex justify-between items-start mb-2">
                   <h1 className="text-2xl font-black uppercase leading-tight">{product.title}</h1>
                   <p className="text-2xl font-bold">{product.price} ₽</p>
                </div>
                <p className="text-zinc-500 text-sm">Артикул: OM-{product.id}-24</p>
              </div>

              {/* Size Selector */}
              <div>
                <div className="flex justify-between mb-2">
                  <span className="text-sm font-bold uppercase">Размер</span>
                  <button className="text-xs underline text-zinc-500 hover:text-black">Таблица размеров</button>
                </div>
                <div className="grid grid-cols-5 gap-2">
                  {product.sizes.map(size => (
                    <button
                      key={size}
                      onClick={() => setSelectedSize(size)}
                      className={`py-3 text-sm font-bold border ${
                        selectedSize === size 
                          ? 'border-black bg-black text-white' 
                          : 'border-zinc-200 text-zinc-600 hover:border-zinc-400'
                      }`}
                    >
                      {size}
                    </button>
                  ))}
                </div>
              </div>

              {/* Attributes */}
              <div className="bg-zinc-50 p-4 rounded-sm text-sm space-y-2">
                 <div className="flex justify-between">
                    <span className="text-zinc-500">Плотность</span>
                    <span className="font-medium">{product.attributes.density}</span>
                 </div>
                 <div className="flex justify-between">
                    <span className="text-zinc-500">Цвет</span>
                    <span className="font-medium">{product.attributes.color}</span>
                 </div>
                 <div className="flex justify-between">
                    <span className="text-zinc-500">Модель</span>
                    <span className="font-medium text-right">{product.attributes.model_info}</span>
                 </div>
              </div>

              <Button 
                fullWidth 
                onClick={() => onAddToCart(product, selectedSize)}
                disabled={!selectedSize}
              >
                {selectedSize ? `Оформить предзаказ` : 'Выберите размер'}
              </Button>
              
              <p className="text-xs text-zinc-400 text-center">
                 *Товар доступен только по 100% предзаказу. Срок производства 5-7 дней.
              </p>

              {/* Tabs */}
              <div className="border-t border-zinc-200 pt-4">
                 <div className="flex gap-6 border-b border-zinc-200 mb-4">
                    <button 
                       className={`pb-2 text-sm font-bold uppercase ${activeTab === 'desc' ? 'border-b-2 border-black' : 'text-zinc-400'}`}
                       onClick={() => setActiveTab('desc')}
                    >
                       Описание
                    </button>
                    <button 
                       className={`pb-2 text-sm font-bold uppercase ${activeTab === 'comp' ? 'border-b-2 border-black' : 'text-zinc-400'}`}
                       onClick={() => setActiveTab('comp')}
                    >
                       Состав
                    </button>
                 </div>
                 <div className="text-sm text-zinc-600 leading-relaxed">
                    {activeTab === 'desc' ? (
                       <p>Уникальный крой, разработанный нашей студией. Принт нанесен методом шелкографии, что гарантирует долговечность. Идеально подходит для повседневной носки.</p>
                    ) : (
                       <p>{product.attributes.composition}.<br/>Рекомендации по уходу: стирка при 30 градусах, не отбеливать.</p>
                    )}
                 </div>
              </div>
            </div>
          </div>

          {/* Similar Products (Cross-sell) */}
          <div className="max-w-5xl mx-auto px-4 mt-12">
            <h3 className="text-lg font-bold uppercase mb-6">Вам может понравиться</h3>
            <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
               {PRODUCTS.filter(p => p.id !== product.id).slice(0, 4).map(p => (
                  <ProductCard key={p.id} product={p} onClick={() => {}} /> // simplified
               ))}
            </div>
          </div>
        </div>
      );
    };

    const Checkout = ({ cart, user, onPlaceOrder, onBack }) => {
       const [step, setStep] = useState(1); // 1: Details, 2: Payment Info
       const total = cart.reduce((sum, item) => sum + item.product.price, 0);

       if (step === 2) {
          return (
             <div className="min-h-screen bg-zinc-50 p-4 flex items-center justify-center">
                <div className="bg-white p-8 max-w-md w-full shadow-xl rounded-sm text-center">
                   <div className="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                      <Check size={32} className="text-green-600" />
                   </div>
                   <h2 className="text-xl font-black uppercase mb-2">Заявка создана!</h2>
                   <p className="text-sm text-zinc-600 mb-6">
                      Ваш заказ <strong>#OM-8921</strong> ожидает оплаты. Администратор проверит данные и подтвердит заказ.
                   </p>

                   <div className="bg-zinc-100 p-4 rounded text-left mb-6">
                      <p className="text-xs font-bold uppercase text-zinc-500 mb-2">Инструкция по оплате:</p>
                      <p className="text-sm mb-1">1. Перевод по СБП: <strong>+7 (999) 000-00-00</strong> (Сбер)</p>
                      <p className="text-sm mb-4">2. Получатель: <strong>Иван И.</strong></p>
                      <p className="text-xs text-red-500">
                         *Важно: После оплаты отправьте скриншот чека в наш Telegram-бот вместе с номером заказа.
                      </p>
                   </div>

                   <Button fullWidth onClick={() => alert("Переход в Telegram-бот...")} variant="primary">
                      <Send size={16} />
                      Отправить чек в Telegram
                   </Button>
                   <button onClick={onBack} className="mt-4 text-xs underline text-zinc-500">Вернуться в магазин</button>
                </div>
             </div>
          )
       }

       return (
          <div className="min-h-screen bg-white pb-20">
             <div className="sticky top-0 z-30 bg-white border-b border-zinc-100 px-4 py-3 flex items-center gap-4">
                <button onClick={onBack}><ArrowLeft size={20}/></button>
                <span className="font-bold text-sm uppercase">Оформление</span>
             </div>

             <div className="max-w-3xl mx-auto p-4 grid gap-8">
                {/* Products Review */}
                <div>
                   <h3 className="text-sm font-bold uppercase mb-3 text-zinc-400">Ваш заказ</h3>
                   <div className="border border-zinc-200 rounded-sm divide-y divide-zinc-100">
                      {cart.map((item, idx) => (
                         <div key={idx} className="p-3 flex gap-3">
                            <div className="w-16 h-20 bg-zinc-100">
                                <img src={item.product.images[0]} className="w-full h-full object-cover"/>
                            </div>
                            <div>
                               <p className="text-sm font-bold">{item.product.title}</p>
                               <p className="text-xs text-zinc-500">Размер: {item.size}</p>
                               <p className="text-xs font-medium mt-1">{item.product.price} ₽</p>
                            </div>
                         </div>
                      ))}
                   </div>
                </div>

                {/* Form */}
                <div className="space-y-4">
                   <h3 className="text-sm font-bold uppercase text-zinc-400">Данные доставки</h3>
                   
                   {!user && (
                      <div className="bg-yellow-50 p-3 border border-yellow-100 rounded text-sm flex gap-2 text-yellow-800 mb-4">
                         <AlertCircle size={16} />
                         <span>Пожалуйста, авторизуйтесь через Telegram для оформления.</span>
                      </div>
                   )}

                   <div className="grid grid-cols-1 gap-4">
                      <input type="text" placeholder="ФИО Получателя" className="w-full p-3 bg-zinc-50 border border-zinc-200 focus:border-black outline-none text-sm" />
                      <input type="tel" placeholder="Телефон (+7...)" className="w-full p-3 bg-zinc-50 border border-zinc-200 focus:border-black outline-none text-sm" />
                      <input type="email" placeholder="Email" className="w-full p-3 bg-zinc-50 border border-zinc-200 focus:border-black outline-none text-sm" />
                      
                      <div className="grid grid-cols-2 gap-4">
                          <input type="text" placeholder="Серия паспорта" className="w-full p-3 bg-zinc-50 border border-zinc-200 focus:border-black outline-none text-sm" />
                          <input type="text" placeholder="Номер паспорта" className="w-full p-3 bg-zinc-50 border border-zinc-200 focus:border-black outline-none text-sm" />
                      </div>
                      <p className="text-[10px] text-zinc-400">*Паспортные данные необходимы для отправки СДЭК</p>

                      <div className="border border-zinc-200 p-4 rounded-sm">
                          <h4 className="font-bold text-sm mb-2">Способ доставки</h4>
                          <label className="flex items-center justify-between p-2 bg-zinc-50 mb-2 cursor-pointer border border-black">
                              <div className="flex items-center gap-2">
                                  <input type="radio" name="delivery" defaultChecked className="accent-black" />
                                  <span className="text-sm">СДЭК (до пункта выдачи)</span>
                              </div>
                              <span className="text-sm font-bold">~350 ₽</span>
                          </label>
                           <label className="flex items-center justify-between p-2 bg-zinc-50 cursor-pointer border border-transparent">
                              <div className="flex items-center gap-2">
                                  <input type="radio" name="delivery" className="accent-black" />
                                  <span className="text-sm">Самовывоз (Краснодар)</span>
                              </div>
                              <span className="text-sm font-bold">0 ₽</span>
                          </label>
                      </div>
                   </div>
                </div>

                 {/* Summary */}
                 <div className="border-t border-zinc-200 pt-4">
                    <div className="flex justify-between text-sm mb-2">
                       <span>Товары ({cart.length})</span>
                       <span>{total} ₽</span>
                    </div>
                    <div className="flex justify-between text-sm mb-4">
                       <span>Доставка</span>
                       <span>~350 ₽</span>
                    </div>
                    <div className="flex justify-between text-lg font-black uppercase mb-6">
                       <span>Итого</span>
                       <span>{total + 350} ₽</span>
                    </div>

                    <div className="space-y-3">
                        <label className="flex items-start gap-2 text-xs text-zinc-500 cursor-pointer">
                            <input type="checkbox" className="mt-1 accent-black" />
                            <span>Я согласен с Публичной офертой и Политикой обработки персональных данных</span>
                        </label>
                        <Button fullWidth onClick={() => setStep(2)} disabled={!user}>Подтвердить заказ</Button>
                    </div>
                 </div>
             </div>
          </div>
       );
    }

    // --- MAIN APP ---

    const OopsMerchApp = () => {
      const [view, setView] = useState('home'); // home, catalog, product, cart, checkout, profile
      const [selectedProduct, setSelectedProduct] = useState(null);
      const [cart, setCart] = useState([]);
      const [user, setUser] = useState(null); // { name, telegram_id, photo }
      const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
      const [filter, setFilter] = useState('Все');

      const addToCart = (product, size) => {
        setCart([...cart, { product, size }]);
        setView('cart');
      };

      // Mock Telegram Login
      const handleTelegramLogin = () => {
        setTimeout(() => {
          setUser({
            name: "Alexey",
            username: "@alex_merch",
            photo: "https://api.dicebear.com/7.x/avataaars/svg?seed=Alexey"
          });
        }, 1000);
      };

      const renderContent = () => {
        switch(view) {
          case 'product':
            return <ProductDetail 
                      product={selectedProduct} 
                      onBack={() => setView('catalog')} 
                      onAddToCart={addToCart} 
                   />;
          case 'checkout':
             return <Checkout cart={cart} user={user} onBack={() => setView('cart')} />;
          case 'catalog':
          case 'home':
          default:
            return (
              <>
                {/* Hero Section */}
                {view === 'home' && (
                  <div className="relative h-[70vh] bg-zinc-900 text-white flex items-center justify-center overflow-hidden">
                    <div className="absolute inset-0 opacity-50">
                       <img src="https://images.unsplash.com/photo-1523396884711-6946813108e7?auto=format&fit=crop&q=80&w=1200" className="w-full h-full object-cover grayscale" alt="Hero" />
                    </div>
                    <div className="relative z-10 text-center px-4">
                      <h1 className="text-5xl md:text-7xl font-black uppercase tracking-tighter mb-4">
                        Drop <span className="text-red-600">#04</span> Live
                      </h1>
                      <p className="text-sm md:text-lg mb-8 uppercase tracking-widest">Только предзаказ. Ограниченный тираж.</p>
                      <Button variant="primary" className="bg-white text-black hover:bg-zinc-200 mx-auto" onClick={() => setView('catalog')}>
                        Перейти в каталог
                      </Button>
                    </div>
                  </div>
                )}

                {/* Catalog Section */}
                <div className="max-w-6xl mx-auto px-4 py-8 md:py-12">
                  <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4">
                    <h2 className="text-2xl font-black uppercase">Каталог</h2>
                    
                    {/* Category Filter */}
                    <div className="flex gap-2 overflow-x-auto w-full md:w-auto pb-2 no-scrollbar">
                      {CATEGORIES.map(cat => (
                        <button
                          key={cat}
                          onClick={() => setFilter(cat)}
                          className={`px-4 py-2 text-xs font-bold uppercase whitespace-nowrap rounded-full border transition-colors ${
                            filter === cat 
                              ? 'bg-black text-white border-black' 
                              : 'border-zinc-200 hover:border-black text-zinc-600'
                          }`}
                        >
                          {cat}
                        </button>
                      ))}
                    </div>
                  </div>

                  <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-4 gap-y-8">
                    {PRODUCTS
                      .filter(p => filter === 'Все' || p.category === filter)
                      .map(product => (
                        <ProductCard 
                          key={product.id} 
                          product={product} 
                          onClick={(p) => { setSelectedProduct(p); setView('product'); }} 
                        />
                    ))}
                  </div>
                </div>
              </>
            );
        }
      };

      return (
        <div className="min-h-screen bg-white font-sans text-zinc-900">
          {/* Navbar */}
          <nav className="sticky top-0 z-40 bg-white/90 backdrop-blur-md border-b border-zinc-100">
            <div className="max-w-7xl mx-auto px-4 h-16 flex items-center justify-between">
              <div className="flex items-center gap-4">
                <button className="md:hidden p-2 -ml-2" onClick={() => setMobileMenuOpen(true)}>
                  <Menu size={24} />
                </button>
                <div className="text-xl font-black uppercase tracking-tighter cursor-pointer" onClick={() => setView('home')}>
                  Oops<span className="text-red-600">.</span>
                </div>
              </div>

              <div className="hidden md:flex items-center gap-8 text-sm font-bold uppercase tracking-wide">
                <button onClick={() => setView('catalog')} className="hover:text-zinc-500">Каталог</button>
                <button className="hover:text-zinc-500">Инфо</button>
                <button className="hover:text-zinc-500">О нас</button>
              </div>

              <div className="flex items-center gap-2 md:gap-4">
                <button className="p-2 hover:bg-zinc-100 rounded-full"><Search size={20} /></button>
                
                {/* Profile/Login */}
                {user ? (
                   <div className="flex items-center gap-2 cursor-pointer bg-zinc-100 rounded-full pl-1 pr-3 py-1">
                      <img src={user.photo} className="w-6 h-6 rounded-full bg-zinc-300" />
                      <span className="text-xs font-bold hidden md:block">{user.name}</span>
                   </div>
                ) : (
                   <button 
                      onClick={handleTelegramLogin}
                      className="flex items-center gap-2 bg-[#24A1DE] text-white px-3 py-1.5 rounded-full text-xs font-bold hover:bg-[#1b8dbd] transition-colors"
                   >
                      <Send size={12} />
                      <span className="hidden md:inline">Войти</span>
                   </button>
                )}

                <div className="relative cursor-pointer" onClick={() => setView('cart')}>
                  <button className="p-2 hover:bg-zinc-100 rounded-full"><ShoppingBag size={20} /></button>
                  {cart.length > 0 && (
                    <span className="absolute top-1 right-0 bg-red-600 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-bold">
                      {cart.length}
                    </span>
                  )}
                </div>
              </div>
            </div>
          </nav>

          {/* Main Content */}
          <main>
            {renderContent()}
          </main>

          {/* Cart Drawer */}
          {view === 'cart' && (
            <div className="fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex justify-end">
              <div className="w-full max-w-md bg-white h-full flex flex-col shadow-2xl">
                <div className="p-4 flex items-center justify-between border-b border-zinc-100">
                  <h2 className="text-lg font-black uppercase">Корзина ({cart.length})</h2>
                  <button onClick={() => setView('catalog')} className="p-2 hover:bg-zinc-100 rounded-full">
                    <X size={20} />
                  </button>
                </div>

                <div className="flex-1 overflow-y-auto p-4 space-y-4">
                  {cart.length === 0 ? (
                    <div className="h-full flex flex-col items-center justify-center text-zinc-400 gap-4">
                      <ShoppingBag size={48} strokeWidth={1} />
                      <p>Ваша корзина пуста</p>
                      <Button variant="outline" onClick={() => setView('catalog')}>В каталог</Button>
                    </div>
                  ) : (
                    cart.map((item, idx) => (
                      <div key={idx} className="flex gap-4">
                        <div className="w-20 h-24 bg-zinc-100 flex-shrink-0">
                           <img src={item.product.images[0]} className="w-full h-full object-cover"/>
                        </div>
                        <div className="flex-1">
                          <h3 className="text-sm font-bold uppercase">{item.product.title}</h3>
                          <p className="text-xs text-zinc-500">Размер: {item.size}</p>
                          <p className="text-sm font-medium mt-1">{item.product.price} ₽</p>
                        </div>
                        <button 
                          onClick={() => setCart(cart.filter((_, i) => i !== idx))}
                          className="text-zinc-400 hover:text-red-500 self-start"
                        >
                          <X size={16} />
                        </button>
                      </div>
                    ))
                  )}
                </div>

                {cart.length > 0 && (
                  <div className="p-4 border-t border-zinc-100 bg-zinc-50">
                    <div className="flex justify-between mb-4 text-lg font-black uppercase">
                      <span>Итого:</span>
                      <span>{cart.reduce((acc, item) => acc + item.product.price, 0)} ₽</span>
                    </div>
                    <Button fullWidth onClick={() => setView('checkout')}>Перейти к оформлению</Button>
                  </div>
                )}
              </div>
            </div>
          )}

          {/* Mobile Menu */}
          {mobileMenuOpen && (
            <div className="fixed inset-0 z-50 bg-black text-white flex flex-col">
              <div className="p-4 flex justify-between items-center">
                <span className="font-black text-xl">MENU</span>
                <button onClick={() => setMobileMenuOpen(false)}><X size={24} /></button>
              </div>
              <div className="flex-1 flex flex-col p-8 gap-6 text-2xl font-black uppercase tracking-tight">
                <button className="text-left hover:text-red-600" onClick={() => {setView('catalog'); setMobileMenuOpen(false)}}>Каталог</button>
                <button className="text-left hover:text-red-600">Мои заказы</button>
                <button className="text-left hover:text-red-600">Инфо</button>
                <div className="mt-auto text-sm font-normal normal-case text-zinc-500 space-y-2">
                   <p>Политика конфиденциальности</p>
                   <p>Публичная оферта</p>
                </div>
              </div>
            </div>
          )}

          {/* Footer */}
          <footer className="bg-zinc-900 text-zinc-400 py-12 px-4 text-xs">
             <div className="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                   <h4 className="text-white font-black uppercase mb-4">Oops Merch</h4>
                   <p>Лимитированные коллекции одежды.</p>
                   <p>Только по предзаказу.</p>
                </div>
                <div>
                   <h4 className="text-white font-bold uppercase mb-4">Помощь</h4>
                   <ul className="space-y-2">
                      <li>Доставка и оплата</li>
                      <li>Таблица размеров</li>
                      <li>Возврат</li>
                   </ul>
                </div>
                <div>
                   <h4 className="text-white font-bold uppercase mb-4">Документы</h4>
                   <ul className="space-y-2">
                      <li>Политика конфиденциальности</li>
                      <li>Оферта</li>
                   </ul>
                </div>
                 <div>
                   <h4 className="text-white font-bold uppercase mb-4">Контакты</h4>
                   <p>tg: @oops_admin</p>
                </div>
             </div>
          </footer>
        </div>
      );
    };

    // 6. Рендерим главный компонент в #root
    ReactDOM.render(
      <OopsMerchApp />,
      document.getElementById('root')
    );

  </script>

</body>
</html>


